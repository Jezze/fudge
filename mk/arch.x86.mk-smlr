AR=i386-unknown-elf-ar rcs
AS=i386-unknown-elf-as -c -o
CC=smlrc -Wall -seg32 -nopp -no-leading-underscore -nobss
LD=i386-unknown-elf-ld -static -nostdlib -o
NASM=nasm -f elf -o
PP=smlrpp -Iinclude -Ilib -Isrc

%.i: %.c
	@echo PP $@
	@$(PP) $^ > $@

%.asm: %.i
	@echo CC $@
	$(CC) $^ $@

%.o: %.asm
	@echo NASM $@
	@$(NASM) $@ $^

%.o: %.s
	@echo AS $@
	@$(AS) $@ $^
